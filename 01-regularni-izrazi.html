
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Regularni izrazi &#8212; Programiranje 1</title>
    
  <link rel="stylesheet" href="_static/css/index.d431a4ee1c1efae0e38bdfebc22debff.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/sphinx-book-theme.bfb7730f9caf2ec0b46a44615585038c.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.30270b6e4c972e43c488.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Zajem podatkov" href="02-zajem-podatkov.html" />
    <link rel="prev" title="Programiranje 1" href="00-uvod.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">Programiranje 1</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="00-uvod.html">
   Programiranje 1
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Analiza podatkov
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Regularni izrazi
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02-zajem-podatkov.html">
   Zajem podatkov
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03-analiza-podatkov.html">
   Analiza podatkov
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Funkcijsko programiranje
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="04-uvod-v-ocaml.html">
   Uvod v OCaml
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05-funkcijsko-programiranje.html">
   Funkcijsko programiranje
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06-definicije-tipov.html">
   Definicije tipov
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07-ucinki-in-cistost.html">
   Učinki in čistost
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="09-modularnost.html">
   Modularnost
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Podatkovne strukture in algoritmi
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="08-iskalna-drevesa.html">
   Iskalna drevesa
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10-spremenljive-podatkovne-strukture.html">
   Spremenljive podatkovne strukture
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11-deli-in-vladaj.html">
   Deli in vladaj
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12-dinamicno-programiranje.html">
   Dinamicno programiranje
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="13-memoizacija.html">
   Memoizacija
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="_sources/01-regularni-izrazi.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/01-regularni-izrazi.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/matijapretnar/programiranje-1/zapiski?urlpath=tree/01-regularni-izrazi.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#regularni-izrazi-v-pythonu">
   Regularni izrazi v Pythonu
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vzorci-za-znake">
     Vzorci za znake
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#kvantifikatorji">
     Kvantifikatorji
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#posebni-znaki">
     Posebni znaki
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#skupine">
     Skupine
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#metode-za-delo-z-regularnimi-izrazi">
   Metode za delo z regularnimi izrazi
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#knjiznica-beautiful-soup">
   Knjižnica Beautiful Soup
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="regularni-izrazi">
<h1>Regularni izrazi<a class="headerlink" href="#regularni-izrazi" title="Permalink to this headline">¶</a></h1>
<p>Običajno moramo podatke, ki jih želimo analizirati, najprej prečistiti. Na primer, svetovni splet je bogat vir podatkov, vendar so ti dostikrat dostopni le v formatu HTML, ki poleg koristne vsebine vsebuje še marsikaj. Recimo, da nas zanimajo podatki o <a class="reference external" href="https://www.imdb.com/search/title/?sort=num_votes,desc&amp;title_type=feature&amp;count=250">250 filmih z največ glasovi na strani IMDB</a>. Vidimo, da stran ponuja veliko koristnih podatkov: naslov, leto izida, dolžno, žanre, ocene, igralce, opise, …</p>
<p><img alt="250 najbolj znanih filmov" src="_images/250-najbolj-znanih-filmov.png" /></p>
<p>Če pa v brskalniku shranimo izvorno kodo in HTML datoteko odpremo, pa je podatke težko najti.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;datoteke/250-najbolj-znanih-filmov.html&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">html</span><span class="p">[:</span><span class="mi">1000</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;!DOCTYPE html&gt;
&lt;html
    xmlns:og=&quot;http://ogp.me/ns#&quot;
    xmlns:fb=&quot;http://www.facebook.com/2008/fbml&quot;&gt;
    &lt;head&gt;
        
&lt;script type=&#39;text/javascript&#39;&gt;var ue_t0=ue_t0||+new Date();&lt;/script&gt;
&lt;script type=&#39;text/javascript&#39;&gt;
window.ue_ihb = (window.ue_ihb || window.ueinit || 0) + 1;
if (window.ue_ihb === 1) {

var ue_csm = window,
    ue_hob = +new Date();
(function(d){var e=d.ue=d.ue||{},f=Date.now||function(){return+new Date};e.d=function(b){return f()-(b?0:d.ue_t0)};e.stub=function(b,a){if(!b[a]){var c=[];b[a]=function(){c.push([c.slice.call(arguments),e.d(),d.ue_id])};b[a].replay=function(b){for(var a;a=c.shift();)b(a[0],a[1],a[2])};b[a].isStub=1}};e.exec=function(b,a){return function(){try{return b.apply(this,arguments)}catch(c){ueLogError(c,{attribution:a||&quot;undefined&quot;,logLevel:&quot;WARN&quot;})}}}})(ue_csm);


    var ue_err_chan = &#39;jserr&#39;;
(function(d,e){function h(f,b){if(!(a.ec&gt;a.mxe)&amp;&amp;f){a.ter.push(f);b=b||{};var c=f.logLevel||b.logLevel;c&amp;&amp;c!==k&amp;&amp;c!==m&amp;&amp;c!==n&amp;&amp;c!==p||a.ec++;c&amp;&amp;c
</pre></div>
</div>
</div>
</div>
<p>Pomagajmo si s pomožno funkcijo, ki poišče začetke in konce vseh neprekrivajočih se pojavitev danega niza v besedilu.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">vse_pojavitve</span><span class="p">(</span><span class="n">besedilo</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">iskani_niz</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">konec_pojavitve</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">zacetek_pojavitve</span> <span class="o">=</span> <span class="n">besedilo</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">iskani_niz</span><span class="p">,</span> <span class="n">konec_pojavitve</span><span class="p">)</span>
            <span class="n">konec_pojavitve</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">zacetek_pojavitve</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">iskani_niz</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">besedilo</span><span class="p">))</span>
            <span class="k">yield</span> <span class="n">zacetek_pojavitve</span><span class="p">,</span> <span class="n">konec_pojavitve</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">break</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Ena sama je, mama!&#39;</span><span class="p">,</span> <span class="s1">&#39;ma&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">  File</span><span class="nn"> &quot;&lt;ipython-input-3-9c7f628133ca&gt;&quot;</span><span class="gt">, line </span><span class="mi">1</span>
    <span class="nb">list</span><span class="p">(</span><span class="n">vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Ena sama je, mama!&#39;</span><span class="p">,</span> <span class="s1">&#39;ma&#39;</span><span class="p">)</span>
                                                  <span class="o">^</span>
<span class="ne">SyntaxError</span>: unexpected EOF while parsing
</pre></div>
</div>
</div>
</div>
<p>Če želimo, lahko vsako pojavitev prikažemo v njenem kontekstu:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pokazi_vse_pojavitve</span><span class="p">(</span><span class="n">besedilo</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">iskani_niz</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">velikost_konteksta</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">zacetek</span><span class="p">,</span> <span class="n">konec</span> <span class="ow">in</span> <span class="n">vse_pojavitve</span><span class="p">(</span><span class="n">besedilo</span><span class="p">,</span> <span class="n">iskani_niz</span><span class="p">):</span>
        <span class="n">zacetek_konteksta</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">zacetek</span> <span class="o">-</span> <span class="n">velikost_konteksta</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">konec_konteksta</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">konec</span> <span class="o">+</span> <span class="n">velikost_konteksta</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">besedilo</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">besedilo</span><span class="p">[</span><span class="n">zacetek_konteksta</span><span class="p">:</span><span class="n">konec_konteksta</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">((</span><span class="n">zacetek</span> <span class="o">-</span> <span class="n">zacetek_konteksta</span><span class="p">)</span> <span class="o">*</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="n">konec</span> <span class="o">-</span> <span class="n">zacetek</span><span class="p">)</span> <span class="o">*</span> <span class="s1">&#39;^&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Ena sama je, mama!&#39;</span><span class="p">,</span> <span class="s1">&#39;ma&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Recimo, da nas zanimajo podatki o Vojni zvezd:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="s1">&#39;Star Wars&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>V datoteki najdemo kar nekaj pojavitev, za vsako epizodo po dve: eno iz prikaza naslova in eno iz opisa slike. Vidimo, da so vsi naslovi podobne oblike: na začetku je značka <code class="docutils literal notranslate"><span class="pre">&lt;a</span> <span class="pre">href=&quot;/title/tt0123456/?ref_=adv_li_tt&quot;&gt;</span></code>, pri čemer se šifra spreminja od filma do filma, na koncu je <code class="docutils literal notranslate"><span class="pre">&lt;/a&gt;</span></code>, med njima pa je naslov filma. Če bi se zelo potrudili, bi lahko spisali program, ki iz takega niza izlušči šifro in naslov.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">izlusci_sifro_in_naslov</span><span class="p">(</span><span class="n">niz</span><span class="p">):</span>
    <span class="n">pred_sifro</span> <span class="o">=</span> <span class="s1">&#39;&lt;a href=&quot;/title/tt&#39;</span>
    <span class="n">med_sifro_in_naslovom</span> <span class="o">=</span> <span class="s1">&#39;/?ref_=adv_li_tt&quot;&gt;&#39;</span>
    <span class="n">za_naslovom</span> <span class="o">=</span> <span class="s1">&#39;&lt;/a&gt;&#39;</span>
    <span class="n">zacetek_sifre</span> <span class="o">=</span> <span class="n">niz</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pred_sifro</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">pred_sifro</span><span class="p">)</span>
    <span class="n">konec_sifre</span> <span class="o">=</span> <span class="n">niz</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">med_sifro_in_naslovom</span><span class="p">)</span>
    <span class="n">zacetek_naslova</span> <span class="o">=</span> <span class="n">konec_sifre</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">med_sifro_in_naslovom</span><span class="p">)</span>
    <span class="n">konec_naslova</span> <span class="o">=</span> <span class="n">niz</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">za_naslovom</span><span class="p">)</span>
    <span class="n">sifra</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">niz</span><span class="p">[</span><span class="n">zacetek_sifre</span><span class="p">:</span><span class="n">konec_sifre</span><span class="p">])</span>
    <span class="n">naslov</span> <span class="o">=</span> <span class="n">niz</span><span class="p">[</span><span class="n">zacetek_naslova</span><span class="p">:</span><span class="n">konec_naslova</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">sifra</span><span class="p">,</span> <span class="n">naslov</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">izlusci_sifro_in_naslov</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&quot;/title/tt0076759/?ref_=adv_li_tt&quot;&gt;Star Wars: Episode IV - A New Hope&lt;/a&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">izlusci_sifro_in_naslov</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&quot;/title/tt0086190/?ref_=adv_li_tt&quot;&gt;Star Wars: Episode VI - Return of the Jedi&lt;/a&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Podobno bi lahko naredili še za leto izida, dolžino in ostalo, vendar mora obstajati boljši način. Mi si bomo pogledali dva. Prvi način so regularni izrazi - ti so univerzalno (z manjšimi dialekti) razširjeni zapis vzorcev nizov, ki jih lahko uporabljamo za delo s kakršnim koli besedilom. Regularne izraze podpirajo praktično vsi programski jeziki in naprednejši urejevalniki besedil. Zaradi vseobče uporabnosti se bomo regularnim izrazom bolj posvetili, niso pa vedno najboljše orodje pri roki, saj zaradi splošnosti ne izkoristijo vse strukture, ki je na voljo. Zato si bomo ogledali še drugi način, knjižnico <a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/">Beautiful Soup</a>, ki je namenjena analizi HTML datotek.</p>
<div class="section" id="regularni-izrazi-v-pythonu">
<h2>Regularni izrazi v Pythonu<a class="headerlink" href="#regularni-izrazi-v-pythonu" title="Permalink to this headline">¶</a></h2>
<p>Za delo z regularnimi izrazi (ali regeksi) v Pythonu uporabljamo knjižnico <a class="reference external" href="https://docs.python.org/3/library/re.html"><code class="docutils literal notranslate"><span class="pre">re</span></code></a>, ki je vključen v vsako različico Pythona. V njej je najbolj osnovna funkcija <code class="docutils literal notranslate"><span class="pre">search</span></code>, ki sprejme vzorec in besedilo, v katerem iščemo, ter vrne prvo pojavitev, predstavljeno z objektom razreda <code class="docutils literal notranslate"><span class="pre">re.Match</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;ma&#39;</span><span class="p">,</span> <span class="s1">&#39;Ena sama je, mama!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>V objektu imamo dostop do začetka in konca pojavitve in njene vsebine. Uporabimo lahko tudi funkcijo <code class="docutils literal notranslate"><span class="pre">re.finditer</span></code>, ki vrne iterator po vseh pojavitvah:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="s1">&#39;ma&#39;</span><span class="p">,</span> <span class="s1">&#39;Ena sama je, mama!&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>S pomočjo te funkcije lahko na veliko bolj enostaven način napišemo funkcijo <code class="docutils literal notranslate"><span class="pre">vse_pojavitve</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">vse_pojavitve</span><span class="p">(</span><span class="n">besedilo</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vzorec</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">pojavitev</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">vzorec</span><span class="p">,</span> <span class="n">besedilo</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">pojavitev</span><span class="o">.</span><span class="n">start</span><span class="p">(),</span> <span class="n">pojavitev</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Ena sama je, mama!&#39;</span><span class="p">,</span> <span class="s1">&#39;ma&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Seveda pa regularni izrazi pokažejo svojo pravo moč, ko začnemo uporabljati še ostale vzorce. Vse lahko najdete v <a class="reference external" href="https://docs.python.org/3/library/re.html#regular-expression-syntax">uradni dokumentaciji</a>, mi pa si poglejmo najbolj pogoste.</p>
<div class="section" id="vzorci-za-znake">
<h3>Vzorci za znake<a class="headerlink" href="#vzorci-za-znake" title="Permalink to this headline">¶</a></h3>
<p>Katerikoli znak predstavimo s piko:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Ena sama je, mama!&#39;</span><span class="p">,</span> <span class="s1">&#39;.a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Ena sama je, mama!&#39;</span><span class="p">,</span> <span class="s1">&#39;.m&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Če se želimo omejiti na posamezne znake ali posamezen razpon zaporednih znakov, jih naštejemo med oglatimi oklepaji:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;ata, mama, teta, stric&#39;</span><span class="p">,</span> <span class="s1">&#39;.[aeiou].&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;ata, mama, teta, stric&#39;</span><span class="p">,</span> <span class="s1">&#39;.[aeiou][a-z]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Če kot prvi znak v oglatih oklepajih damo <code class="docutils literal notranslate"><span class="pre">^</span></code>, dobimo komplement:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;ata, mama, teta, stric&#39;</span><span class="p">,</span> <span class="s1">&#39;.[^aeiou].&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="kvantifikatorji">
<h3>Kvantifikatorji<a class="headerlink" href="#kvantifikatorji" title="Permalink to this headline">¶</a></h3>
<p>Z <code class="docutils literal notranslate"><span class="pre">*</span></code> označimo poljubno mnogo ponovitev danega vzorca:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Oddal sem davčno napoved&#39;</span><span class="p">,</span> <span class="s1">&#39;d*a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Če želimo, da se vzorec pojavi vsaj enkrat, uporabimo <code class="docutils literal notranslate"><span class="pre">+</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Oddal sem davčno napoved&#39;</span><span class="p">,</span> <span class="s1">&#39;d+a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Kvantifikatorja <code class="docutils literal notranslate"><span class="pre">*</span></code> in <code class="docutils literal notranslate"><span class="pre">+</span></code> sta požrešna, kar pomeni, da poskusita zajeti kolikor znakov lahko:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Oddal sem davčno napoved&#39;</span><span class="p">,</span> <span class="s1">&#39;d.*a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Oddal sem davčno napoved&#39;</span><span class="p">,</span> <span class="s1">&#39;d.+a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Če želimo najti najkrajše možne pojavitve, moramo na koncu dodati še <code class="docutils literal notranslate"><span class="pre">?</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Oddal sem davčno napoved&#39;</span><span class="p">,</span> <span class="s1">&#39;d.*?a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Oddal sem davčno napoved&#39;</span><span class="p">,</span> <span class="s1">&#39;d.+?a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Če uporabimo samo <code class="docutils literal notranslate"><span class="pre">?</span></code>, to pomeni morebitno pojavitev vzorca:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;Oddal sem davčno napoved&#39;</span><span class="p">,</span> <span class="s1">&#39;da?&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Kvantifikatorji <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">+</span></code> in <code class="docutils literal notranslate"><span class="pre">?</span></code> so posebni primeri kvantifikatorja <code class="docutils literal notranslate"><span class="pre">{m,n}</span></code>, ki predstavlja katerokoli število ponovitev med <code class="docutils literal notranslate"><span class="pre">m</span></code> in <code class="docutils literal notranslate"><span class="pre">n</span></code>, pri čemer lahko kakšno izmed meja tudi izpustimo. Tako je kvantifikator <code class="docutils literal notranslate"><span class="pre">*</span></code> okrajšava za <code class="docutils literal notranslate"><span class="pre">{0,}</span></code>, kvantifikator <code class="docutils literal notranslate"><span class="pre">+</span></code> okrajšava za <code class="docutils literal notranslate"><span class="pre">{1,}</span></code>, kvantifikator <code class="docutils literal notranslate"><span class="pre">?</span></code> pa okrajšava za <code class="docutils literal notranslate"><span class="pre">{0,1}</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;&quot;Brrrr, brrrrrr, brrr, brrrrrrr,&quot; je drgetal od mraza.&#39;</span><span class="p">,</span> <span class="s1">&#39;[Bb]r{4,5}&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;&quot;Brrr, brrrrrr, brrr, brrrrrrr,&quot; je drgetal od mraza.&#39;</span><span class="p">,</span> <span class="s1">&#39;[Bb]r{4,}&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pokazi_vse_pojavitve</span><span class="p">(</span><span class="s1">&#39;&quot;Brrr, brrrrrr, brrr, brrrrrrr,&quot; je drgetal od mraza.&#39;</span><span class="p">,</span> <span class="s1">&#39;[Bb]r{,5}&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="posebni-znaki">
<h3>Posebni znaki<a class="headerlink" href="#posebni-znaki" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="skupine">
<h3>Skupine<a class="headerlink" href="#skupine" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="metode-za-delo-z-regularnimi-izrazi">
<h2>Metode za delo z regularnimi izrazi<a class="headerlink" href="#metode-za-delo-z-regularnimi-izrazi" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="knjiznica-beautiful-soup">
<h2>Knjižnica Beautiful Soup<a class="headerlink" href="#knjiznica-beautiful-soup" title="Permalink to this headline">¶</a></h2>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="00-uvod.html" title="previous page">Programiranje 1</a>
    <a class='right-next' id="next-link" href="02-zajem-podatkov.html" title="next page">Zajem podatkov</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Matija Pretnar<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.30270b6e4c972e43c488.js"></script>


    
  </body>
</html>